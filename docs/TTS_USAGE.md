# TTS (Text-to-Speech) 사용 가이드

## 개요
FastMovieMaker는 대본(스크립트)에서 자동으로 음성과 자막을 생성하는 TTS 기능을 제공합니다.

## 지원 엔진

### 1. Edge-TTS (Microsoft Azure)
- **무료 사용 가능**
- 다양한 언어 및 음성 지원:
  - 한국어: `ko-KR-SunHiNeural` (여성), `ko-KR-InJoonNeural` (남성)
  - 영어: `en-US-JennyNeural`, `en-US-GuyNeural` 등
- 인터넷 연결 필요

### 2. ElevenLabs API
- **API 키 필요** (유료/무료 티어)
- 고품질 자연스러운 음성
- 다양한 목소리 선택 가능
- 설정: Edit → Preferences → TTS 탭에서 API 키 입력

## 사용 방법

### 1단계: TTS 다이얼로그 열기
- 메뉴: `Subtitle` → `Generate &Speech (TTS)...`
- 단축키: `Ctrl+T`

### 2단계: 대본 입력
다음 형식으로 대본 작성:

```
# 첫 번째 문장
안녕하세요, 오늘은 FastMovieMaker 사용법을 알려드리겠습니다.

# 두 번째 문장 (빈 줄로 구분)
TTS 기능을 사용하면 자동으로 음성과 자막이 생성됩니다.

# 세 번째 문장
매우 간단하죠?
```

**구분 규칙:**
- 빈 줄(`\n\n`)로 자막 세그먼트 구분
- `#`으로 시작하는 줄은 주석 (무시됨)
- 각 세그먼트는 개별 자막 + 음성으로 생성

### 3단계: 설정 선택

#### 엔진 선택
- **Edge-TTS**: 무료, 빠름, 대부분의 용도에 적합
- **ElevenLabs**: 고품질, API 키 필요

#### 언어 및 음성
- 드롭다운에서 원하는 음성 선택
- 한국어 프로젝트: `ko-KR-SunHiNeural` 추천
- 영어 프로젝트: `en-US-JennyNeural` 추천

#### 옵션
- **Mix with video audio**: 비디오 오디오와 믹싱 (비디오 로드 시)
- **자동 타이밍**: 문장 길이에 따라 자막 타이밍 자동 조정

### 4단계: 생성 시작
- `Generate` 버튼 클릭
- 진행률 표시줄로 진행 상황 확인
- 완료 시 새 TTS 트랙이 자동으로 추가됨

## 생성된 결과

### 자막 트랙
- 프로젝트에 `TTS Track N` 이름으로 추가
- 각 문장이 개별 자막 세그먼트로 생성
- 타임라인에서 편집 가능 (드래그, 텍스트 수정 등)

### 오디오 파일
- 임시 파일: `C:\Users\USER\AppData\Local\Temp\fmm_tts_*.mp3`
- 비디오와 믹싱 시 별도 오디오 파일 생성
- 프로젝트 저장 시 경로 유지

### 재생
- TTS 음성은 타임라인 재생 시 자동 재생
- 볼륨 조절: 재생 컨트롤의 `🎤` 슬라이더 사용
- 비디오 오디오와 독립적으로 조절 가능

## 고급 기능

### 비디오 오디오 믹싱
1. 비디오 파일 먼저 로드
2. TTS 생성 시 "Mix with video audio" 체크
3. 결과: 비디오 오디오 + TTS 음성 혼합

### 여러 TTS 트랙 사용
- 여러 번 TTS 생성하여 다중 트랙 생성 가능
- 트랙 선택기에서 활성 트랙 전환
- 각 트랙은 독립적인 자막 + 오디오

### 타이밍 미세 조정
1. TTS 생성 후 타임라인에서 세그먼트 드래그
2. 자막 테이블에서 시작/종료 시간 직접 편집
3. 점프 다이얼로그(Ctrl+J)로 프레임 단위 이동

## 내보내기

### SRT 파일 (자막만)
- `File` → `Export` → `SRT File`
- 텍스트 + 타이밍 정보만 내보내기

### 비디오 파일 (자막 번인 + 오디오)
- `File` → `Export` → `Batch Export`
- 자막이 비디오에 번인(burn-in)됨
- TTS 오디오가 비디오에 믹싱됨
- 해상도 선택 가능 (1080p, 720p, 480p)

## 문제 해결

### "FFmpeg Missing" 에러
- FFmpeg 설치 필요: [ffmpeg.org](https://ffmpeg.org/download.html)
- 설치 후 Edit → Preferences → General에서 경로 설정

### ElevenLabs API 키 에러
1. [elevenlabs.io](https://elevenlabs.io) 가입
2. API 키 발급
3. Edit → Preferences → TTS → ElevenLabs API Key 입력

### 음성이 재생되지 않음
- `🎤` 슬라이더 볼륨 확인 (0%이면 음소거)
- TTS 트랙이 활성화되어 있는지 확인
- 프로젝트 다시 로드 시도

### 생성 속도가 느림
- Edge-TTS: 네트워크 속도에 의존
- ElevenLabs: API 요청 제한 (무료 티어)
- 대본을 짧은 문장으로 나누면 병렬 처리 가능

## 팁

1. **대본 작성 시**:
   - 문장당 10-20단어 권장 (가독성)
   - 너무 긴 문장은 자막이 화면을 벗어날 수 있음

2. **음성 선택**:
   - 프로젝트에 맞는 톤 선택 (남성/여성, 나이대)
   - 여러 음성으로 테스트해보기

3. **타이밍 조정**:
   - 첫 생성 후 타임라인에서 조정하는 것이 효율적
   - 프레임 스냅(F 키) 활성화로 정확한 조정 가능

4. **여러 언어 지원**:
   - 한 프로젝트에 한국어 + 영어 트랙 별도 생성 가능
   - 트랙 이름을 "한국어", "English"로 구분
